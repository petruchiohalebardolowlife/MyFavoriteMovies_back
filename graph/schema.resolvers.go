package graph

// This file will be automatically regenerated based on the schema, any resolver implementations
// will be copied through when generating and any unknown code will be moved to the end.
// Code generated by github.com/99designs/gqlgen version v0.17.64

import (
	"context"
	"fmt"
	"myfavouritemovies/repository"
	"myfavouritemovies/structs"
	"myfavouritemovies/utils"
)

// CreateUser is the resolver for the createUser field.
func (r *mutationResolver) CreateUser(ctx context.Context, nickName string, userName string, password string) (*structs.User, error) {
	user := &structs.User{
		NickName: nickName,
		UserName: userName,
		Password: password,
	}
	if err := repository.AddUser(user); err != nil {
		return nil, err
	}

	return user, nil
}

// DeleteUser is the resolver for the deleteUser field.
func (r *mutationResolver) DeleteUser(ctx context.Context) (bool, error) {
	user, errUser := utils.GetContextUser(ctx)
	if errUser != nil {
		return false, errUser
	}

	if err := repository.DeleteUser(user.ID); err != nil {
		return false, err
	}

	return true, nil
}

// UpdateUser is the resolver for the updateUser field.
func (r *mutationResolver) UpdateUser(ctx context.Context, nickName *string, password *string) (bool, error) {
	user, errUser := utils.GetContextUser(ctx)
	if errUser != nil {
		return false, errUser
	}
	_, err := repository.UpdateUser(user, nickName, password)
	if err != nil {
		return false, err
	}
	return true, nil
}

// AddFavoriteMovie is the resolver for the addFavoriteMovie field.
func (r *mutationResolver) AddFavoriteMovie(ctx context.Context, userID int32, movieID int32, title string, posterPath string, voteAverage float64) (*structs.FavoriteMovie, error) {
	panic(fmt.Errorf("not implemented: AddFavoriteMovie - addFavoriteMovie"))
}

// RemoveFavoriteMovie is the resolver for the removeFavoriteMovie field.
func (r *mutationResolver) RemoveFavoriteMovie(ctx context.Context, userID int32, movieID int32) (bool, error) {
	panic(fmt.Errorf("not implemented: RemoveFavoriteMovie - removeFavoriteMovie"))
}

// MarkMovieAsWatched is the resolver for the markMovieAsWatched field.
func (r *mutationResolver) MarkMovieAsWatched(ctx context.Context, userID int32, movieID int32, watched bool) (*structs.FavoriteMovie, error) {
	panic(fmt.Errorf("not implemented: MarkMovieAsWatched - markMovieAsWatched"))
}

// AddFavoriteGenre is the resolver for the addFavoriteGenre field.
func (r *mutationResolver) AddFavoriteGenre(ctx context.Context, userID int32, genreID int32) (*structs.FavoriteGenre, error) {
	panic(fmt.Errorf("not implemented: AddFavoriteGenre - addFavoriteGenre"))
}

// RemoveFavoriteGenre is the resolver for the removeFavoriteGenre field.
func (r *mutationResolver) RemoveFavoriteGenre(ctx context.Context, userID int32, genreID int32) (bool, error) {
	panic(fmt.Errorf("not implemented: RemoveFavoriteGenre - removeFavoriteGenre"))
}

// GetUser is the resolver for the getUser field.
func (r *queryResolver) GetUser(ctx context.Context) (*structs.User, error) {
	user, errUser := utils.GetContextUser(ctx)
	if errUser != nil {
		return nil, errUser
	}
	return user, nil
}

// GetAllGenres is the resolver for the getAllGenres field.
func (r *queryResolver) GetAllGenres(ctx context.Context) ([]*structs.Genre, error) {
	genres, err := repository.GetAllGenres()
	if err != nil {
		return nil, err
	}

	return genres, nil
}

// GetAllFavoriteGenres is the resolver for the getAllFavoriteGenres field.
func (r *queryResolver) GetAllFavoriteGenres(ctx context.Context, userID int32) ([]*structs.FavoriteGenre, error) {
	favGenres, err := repository.GetFavoriteGenres(userID)
	if err != nil {
		return nil, err
	}
	return favGenres, nil
}

// GetFavoriteMovies is the resolver for the getFavoriteMovies field.
func (r *queryResolver) GetFavoriteMovies(ctx context.Context, userID int32) ([]*structs.FavoriteMovie, error) {
	favMovies, err := repository.GetFavoriteMovies(userID)
	if err != nil {
		return nil, err
	}

	return favMovies, nil
}

// GetMovieDetails is the resolver for the getMovieDetails field.
func (r *queryResolver) GetMovieDetails(ctx context.Context, movieID int32) (*structs.MovieDetails, error) {
	panic(fmt.Errorf("not implemented: GetMovieDetails - getMovieDetails"))
}

// GetFilteredMovies is the resolver for the getFilteredMovies field.
func (r *queryResolver) GetFilteredMovies(ctx context.Context, filter structs.MovieFilter) (*structs.ResponseFilteredMovies, error) {
	panic(fmt.Errorf("not implemented: GetFilteredMovies - getFilteredMovies"))
}

// Mutation returns MutationResolver implementation.
func (r *Resolver) Mutation() MutationResolver { return &mutationResolver{r} }

// Query returns QueryResolver implementation.
func (r *Resolver) Query() QueryResolver { return &queryResolver{r} }

type mutationResolver struct{ *Resolver }
type queryResolver struct{ *Resolver }
